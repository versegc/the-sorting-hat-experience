<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sorting Hat Ceremony - Premium Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700&family=Quicksand:wght@300;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        :root {
            --gold: #d4af37;
            --magic-blue: #00d4ff;
            --magic-white: #ffffff;
            --bg-dark: #050508;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            background-color: var(--bg-dark);
            font-family: 'Quicksand', sans-serif;
            color: white;
        }

        /* Background Bintang Bergerak */
        #star-canvas {
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1;
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            text-align: center;
        }

        /* Animasi Hat di Awal */
        .sorting-hat-img {
            width: 280px;
            filter: drop-shadow(0 0 30px rgba(212, 175, 55, 0.4));
            animation: float 4s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-2deg); }
            50% { transform: translateY(-25px) rotate(2deg); }
        }

        /* Kotak Kuis Mewah */
        .quiz-box {
            position: relative;
            width: 100%;
            max-width: 600px;
            background: rgba(10, 10, 25, 0.7);
            padding: 50px 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* Hiasan Sudut Cahaya Putih-Biru */
        .quiz-box::before, .quiz-box::after, .corner-bottom::before, .corner-bottom::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border: 3px solid transparent;
            animation: glow-move 2.5s infinite alternate;
        }

        /* Posisi Sudut */
        .quiz-box::before { top: -5px; left: -5px; border-top-color: var(--magic-white); border-left-color: var(--magic-blue); }
        .quiz-box::after { top: -5px; right: -5px; border-top-color: var(--magic-white); border-right-color: var(--magic-blue); }
        .corner-bottom::before { bottom: -5px; left: -5px; border-bottom-color: var(--magic-white); border-left-color: var(--magic-blue); }
        .corner-bottom::after { bottom: -5px; right: -5px; border-bottom-color: var(--magic-white); border-right-color: var(--magic-blue); }

        @keyframes glow-move {
            0% { filter: drop-shadow(0 0 2px var(--magic-blue)); opacity: 0.5; }
            100% { filter: drop-shadow(0 0 15px var(--magic-white)) brightness(1.5); opacity: 1; }
        }

        h1 { font-family: 'Cinzel Decorative', cursive; color: var(--gold); font-size: 2.5em; text-shadow: 0 0 15px rgba(212, 175, 55, 0.5); }

        .btn-option {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 12px 0;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            font-size: 1.1em;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 8px;
        }

        .btn-option:hover {
            background: rgba(0, 212, 255, 0.15);
            border-color: var(--magic-blue);
            transform: scale(1.03);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.2);
        }

        /* Hasil Akhir (Tanpa Kotak) */
        #result-container {
            display: none;
            max-width: 850px;
            animation: fadeInResult 2.5s ease forwards;
        }

        @keyframes fadeInResult {
            from { opacity: 0; filter: blur(10px); transform: scale(0.9); }
            to { opacity: 1; filter: blur(0); transform: scale(1); }
        }

        .house-img {
            width: 220px;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 40px currentColor);
        }

        .house-name {
            font-family: 'Cinzel Decorative', cursive;
            font-size: 4.5em;
            margin: 10px 0;
            letter-spacing: 5px;
        }

        /* Atribut dengan Ikon */
        .attribute-container {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin: 25px 0;
        }

        .attribute-item {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            transition: 0.3s;
        }

        .attribute-item:hover {
            background: rgba(212, 175, 55, 0.1);
            border-color: var(--gold);
            transform: translateY(-5px);
        }

        .attr-icon {
            width: 22px;
            height: 22px;
            stroke: var(--gold);
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<canvas id="star-canvas"></canvas>

<div class="container">
    <div id="start-screen">
        <img src="https://www.pngall.com/wp-content/uploads/11/Magic-Hat-PNG-Image.png" alt="Sorting Hat" class="sorting-hat-img">
        <h1>The Sorting Hat</h1>
        <p style="letter-spacing: 2px; color: #aaa;">KEHENDAK MU ADALAH TAKDIR MU</p>
        <button class="btn-option" onclick="startQuiz()" style="width: 250px; margin: 30px auto; border-color: var(--gold);">MULAI UPACARA</button>
    </div>

    <div id="quiz-container" class="quiz-box hidden">
        <div class="corner-bottom"></div>
        <h2 id="question-text" style="color: var(--gold); font-family: 'Cinzel Decorative'; min-height: 80px;">Memulai Seleksi...</h2>
        <div id="options-container"></div>
    </div>

    <div id="result-container">
        <img id="house-logo" src="" alt="House Logo" class="house-img">
        <h1 id="house-name" class="house-name">HOUSE</h1>
        <div id="house-attributes" class="attribute-container"></div>
        <p id="house-desc" style="font-size: 1.3em; line-height: 1.8; max-width: 650px; margin: 20px auto; color: #ddd;"></p>
        <div style="margin-top: 50px; border-top: 1px solid rgba(212, 175, 55, 0.2); padding-top: 20px;">
            <p style="font-style: italic; color: var(--magic-blue); font-size: 0.9em;">Keputusan ini mutlak. Selamat datang di rumah barumu.</p>
        </div>
    </div>
</div>

<script>
    // Konfigurasi Pertanyaan & Data Asrama
    const questions = [
        { q: "Mana yang paling kamu hargai dalam dirimu?", a: [{t:"Keberanian tanpa batas", h:"G"}, {t:"Kecerdasan dan logika", h:"R"}, {t:"Kesetiaan pada teman", h:"H"}, {t:"Ambisi untuk berkuasa", h:"S"}] },
        { q: "Saat menghadapi rintangan gelap, kamu akan...", a: [{t:"Menerjangnya dengan pedang terhunus", h:"G"}, {t:"Menganalisis pola sihirnya", h:"R"}, {t:"Bekerja sama dengan kawan", h:"H"}, {t:"Mencari celah demi keuntungan diri", h:"S"}] },
        { q: "Pilih artefak yang ingin kamu miliki:", a: [{t:"Mahkota Pengetahuan", h:"R"}, {t:"Cincin Keagungan", h:"S"}, {t:"Piala Persaudaraan", h:"H"}, {t:"Pedang Keadilan", h:"G"}] },
        { q: "Apa yang membuatmu paling takut?", a: [{t:"Dianggap pengecut", h:"G"}, {t:"Menjadi orang biasa saja", h:"S"}, {t:"Kehilangan akal sehat", h:"R"}, {t:"Mengkhianati kepercayaan", h:"H"}] },
        { q: "Bagaimana dunia akan mengingat namamu?", a: [{t:"Sebagai pahlawan legendaris", h:"G"}, {t:"Sebagai pemikir jenius", h:"R"}, {t:"Sebagai orang yang paling baik hati", h:"H"}, {t:"Sebagai pemimpin yang ditakuti", h:"S"}] }
    ];

    const houseData = {
        G: { name: "Gryffindor", color: "#ae0001", attr: ["Berani", "Ksatria", "Tekad"], desc: "Keberanianmu melampaui rasa takut. Kamu adalah sosok yang akan berdiri paling depan untuk membela keadilan. Gryffindor menyambut jiwa ksatriamu!", img: "https://www.pngall.com/wp-content/uploads/11/Gryffindor-Logo-PNG-Image.png" },
        S: { name: "Slytherin", color: "#2a623d", attr: ["Ambisi", "Cerdik", "Pemimpin"], desc: "Kamu memiliki visi yang tajam dan keinginan kuat untuk mencapai puncak. Di Slytherin, ambisimu akan berubah menjadi keagungan yang nyata.", img: "https://www.pngall.com/wp-content/uploads/11/Slytherin-Logo-PNG-Image.png" },
        R: { name: "Ravenclaw", color: "#222f5b", attr: ["Bijak", "Kreatif", "Cerdas"], desc: "Pikiranmu adalah senjata terkuatmu. Kamu melihat apa yang orang lain lewatkan. Selamat datang di rumah para bijak dan cendekiawan.", img: "https://www.pngall.com/wp-content/uploads/11/Ravenclaw-Logo-PNG-Image.png" },
        H: { name: "Hufflepuff", color: "#ecb939", attr: ["Setia", "Sabar", "Jujur"], desc: "Ketulusan hatimu adalah sihir yang paling langka. Kamu menghargai kerja keras dan kesetiaan di atas segalanya. Kamu adalah cahaya bagi teman-temanmu.", img: "https://www.pngall.com/wp-content/uploads/11/Hufflepuff-Logo-PNG-Image.png" }
    };

    const iconMap = {
        "Berani": "shield", "Ksatria": "sword", "Tekad": "flame",
        "Ambisi": "trending-up", "Cerdik": "zap", "Pemimpin": "crown",
        "Bijak": "book-open", "Kreatif": "palette", "Cerdas": "brain",
        "Setia": "heart", "Sabar": "hourglass", "Jujur": "check-circle"
    };

    let currentQ = 0;
    let scores = { G:0, S:0, R:0, H:0 };

    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-container').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentQ];
        document.getElementById('question-text').innerText = q.q;
        const options = document.getElementById('options-container');
        options.innerHTML = '';
        
        q.a.forEach(alt => {
            const btn = document.createElement('button');
            btn.className = 'btn-option';
            btn.innerText = alt.t;
            btn.onclick = () => nextQuestion(alt.h);
            options.appendChild(btn);
        });
    }

    function nextQuestion(house) {
        scores[house]++;
        currentQ++;
        if(currentQ < questions.length) {
            showQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        document.getElementById('quiz-container').classList.add('hidden');
        const winner = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
        const house = houseData[winner];

        const houseNameTag = document.getElementById('house-name');
        houseNameTag.innerText = house.name;
        houseNameTag.style.color = house.color;
        houseNameTag.style.textShadow = `0 0 20px ${house.color}`;
        
        document.getElementById('house-logo').src = house.img;
        document.getElementById('house-logo').style.color = house.color;
        document.getElementById('house-desc').innerText = house.desc;

        const attrDiv = document.getElementById('house-attributes');
        attrDiv.innerHTML = '';
        house.attr.forEach(at => {
            const iconName = iconMap[at] || "star";
            const wrapper = document.createElement('div');
            wrapper.className = 'attribute-item';
            wrapper.innerHTML = `<i data-lucide="${iconName}" class="attr-icon"></i><span>${at}</span>`;
            attrDiv.appendChild(wrapper);
        });

        lucide.createIcons();
        document.getElementById('result-container').style.display = 'block';
    }

    // Background Stars System
    const canvas = document.getElementById('star-canvas');
    const ctx = canvas.getContext('2d');
    let stars = [];

    function initStars() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        stars = [];
        for(let i=0; i<200; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 1.5 + 0.5,
                speed: Math.random() * 0.4 + 0.1,
                opacity: Math.random()
            });
        }
    }

    function drawStars() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        stars.forEach(s => {
            ctx.fillStyle = `rgba(255, 255, 255, ${s.opacity})`;
            ctx.beginPath();
            ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
            ctx.fill();
            s.y += s.speed;
            if(s.y > canvas.height) s.y = 0;
        });
        requestAnimationFrame(drawStars);
    }

    window.addEventListener('resize', initStars);
    initStars();
    drawStars();
</script>

</body>
</html>
